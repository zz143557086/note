### rpc 远程调用面临的问题

```
1.call的id映射  
 给函数一个id来区分函数
2.序列化和反序列化
 数据传输 对数据的压缩 二进制化 以及对数据的解压反解
3.网络传输

http协议是一次性的 一旦对方返回结果连接断开 http也是通过tcp连接的
http2.0 支持长连接
```

#### 客服端

```
1.建立连接 tcp/http
2.将结构体对象序列化成json字符串-序列化
3.发送json字符串 - 调用成功后实际收到的是一个二进制的数据
4.等待服务器发送结果
5.将服务器返回的数据解析成结构体对象 - 反序列化
```

#### 服务端

```
1.监听网络端口80
2.读取数据 - 二进制的json数据
3.对数据进行反序列化结构体对象
4.开始处理业务逻辑
5.将处理的结果PrintResult 序列化成json二进制数据 -序列化
6.将数据返回
```

RPC需要完成的四大部分

```
1.客服端
2.客服端存根 主要存储要调用的服务端的地址  将客户端请求远端服务打包成数据包
3.服务端
4.服务端存根  接收客服端存根通过网络发送的请求消息数据包 调用客服端真正的程序功能和方法，完成功能调用;最后将执行结果打包发送给客服端存根
```

